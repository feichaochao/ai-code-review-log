# é¡¹ç›®ï¼šOpenAi ä»£ç è¯„å®¡:æµ‹è¯•å·¥ç¨‹
### ğŸ˜€ä»£ç è¯„åˆ†ï¼š85
#### ğŸ˜€ä»£ç é€»è¾‘ä¸ç›®çš„ï¼š
æœ¬æ¬¡ä»£ç ä¿®æ”¹ä¸»è¦æ¶‰åŠä¸¤ä¸ªéƒ¨åˆ†ï¼š1) å°†`ChatCompletionRequest.Prompt`çš„è§’è‰²ä»`system`æ”¹ä¸º`user`ï¼Œè¿™å¯èƒ½æ˜¯ä¸ºäº†è°ƒæ•´ä¸AIäº¤äº’çš„è§’è‰²è®¾å®šï¼›2) åœ¨`DeepSeek`ç±»ä¸­å¢åŠ äº†`Accept`è¯·æ±‚å¤´ï¼Œå¹¶æ·»åŠ äº†è°ƒè¯•è¾“å‡ºè¯­å¥ï¼Œä»¥ä¾¿æ›´å¥½åœ°å¤„ç†APIå“åº”å’Œè°ƒè¯•ã€‚
#### âœ…ä»£ç ä¼˜ç‚¹ï¼š
1. å¢åŠ äº†`Accept`è¯·æ±‚å¤´ï¼Œç¡®ä¿æœåŠ¡å™¨è¿”å›çš„æ•°æ®æ ¼å¼ä¸ºJSONï¼Œæå‡äº†APIè°ƒç”¨çš„å¥å£®æ€§ã€‚
2. æ·»åŠ äº†è°ƒè¯•è¾“å‡ºè¯­å¥ï¼Œä¾¿äºå¼€å‘è¿‡ç¨‹ä¸­å¿«é€Ÿå®šä½é—®é¢˜ã€‚
3. åœ¨`ChatCompletionRequest`ç±»ä¸­å¢åŠ äº†`stream`å±æ€§çš„getterå’Œsetteræ–¹æ³•ï¼Œå¢å¼ºäº†ç±»çš„å°è£…æ€§å’Œçµæ´»æ€§ã€‚
#### ğŸ¤”é—®é¢˜ç‚¹ï¼š
1. è°ƒè¯•è¾“å‡ºè¯­å¥`System.out.println(inputLine);`åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯èƒ½ä¼šå½±å“æ€§èƒ½ï¼Œä¸”ä¸ç¬¦åˆæ—¥å¿—ç®¡ç†çš„æœ€ä½³å®è·µã€‚
2. `ChatCompletionRequest.Prompt`çš„è§’è‰²ä¿®æ”¹ä¸º`user`ï¼Œå¯èƒ½ä¼šå½±å“AIçš„è¡Œä¸ºï¼Œéœ€ç¡®ä¿è¿™ç§ä¿®æ”¹ç¬¦åˆä¸šåŠ¡é€»è¾‘ã€‚
3. `ChatCompletionRequest`ç±»ä¸­çš„`stream`å±æ€§æ²¡æœ‰æ˜ç¡®çš„æ³¨é‡Šè¯´æ˜å…¶ç”¨é€”ï¼Œå¯èƒ½å¯¼è‡´å…¶ä»–å¼€å‘è€…è¯¯è§£ã€‚
#### ğŸ¯ä¿®æ”¹å»ºè®®ï¼š
1. å°†è°ƒè¯•è¾“å‡ºè¯­å¥æ›¿æ¢ä¸ºæ—¥å¿—è®°å½•ï¼Œä½¿ç”¨å¦‚`Logger`ç±»æ¥è®°å½•è°ƒè¯•ä¿¡æ¯ï¼Œé¿å…åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¾“å‡ºä¸å¿…è¦çš„æ—¥å¿—ã€‚
2. ç¡®ä¿`ChatCompletionRequest.Prompt`çš„è§’è‰²ä¿®æ”¹ç¬¦åˆä¸šåŠ¡éœ€æ±‚ï¼Œå¹¶åœ¨ä»£ç ä¸­æ·»åŠ æ³¨é‡Šè¯´æ˜ä¿®æ”¹çš„åŸå› ã€‚
3. åœ¨`ChatCompletionRequest`ç±»ä¸­ä¸º`stream`å±æ€§æ·»åŠ æ³¨é‡Šï¼Œæ˜ç¡®å…¶ç”¨é€”å’Œå¯èƒ½çš„å–å€¼ã€‚
#### ğŸ’»ä¿®æ”¹åçš„ä»£ç ï¼š
```java
// DeepSeek.java
// æ›¿æ¢è°ƒè¯•è¾“å‡ºä¸ºæ—¥å¿—è®°å½•
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class DeepSeek implements IOpenAI {
    private static final Logger logger = LoggerFactory.getLogger(DeepSeek.class);

    // ... å…¶ä»–ä»£ç  ...

    StringBuilder content = new StringBuilder();
    while ((inputLine = in.readLine()) != null) {
        logger.debug("Received response line: {}", inputLine); // ä½¿ç”¨æ—¥å¿—è®°å½•è°ƒè¯•ä¿¡æ¯
        content.append(inputLine);
    }

    // ... å…¶ä»–ä»£ç  ...
}

// ChatCompletionRequest.java
// æ·»åŠ æ³¨é‡Šè¯´æ˜streamå±æ€§çš„ç”¨é€”
public class ChatCompletionRequest {
    // ... å…¶ä»–ä»£ç  ...

    /**
     * æ˜¯å¦å¯ç”¨æµå¼å“åº”æ¨¡å¼ã€‚é»˜è®¤ä¸ºfalseã€‚
     */
    private Boolean stream = false;

    // ... å…¶ä»–ä»£ç  ...

    public Boolean getStream() {
        return stream;
    }

    public void setStream(Boolean stream) {
        this.stream = stream;
    }
}
```